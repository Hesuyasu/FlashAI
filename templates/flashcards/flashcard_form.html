{% extends 'base.html' %}
{% load static %}
{% block title %}{% if form.instance.pk %}Edit FlashCard{% else %}Create FlashCard{% endif %}{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/home.css' %}">
<style>
.flashcard-edit-panel.comic-panel { padding:1.6rem 1.7rem; max-width:640px; margin:0 auto; }
.flashcard-edit-panel form label { font-weight:600; color:#d94545; margin-bottom:.35rem; }
.flashcard-edit-panel form input, .flashcard-edit-panel form textarea { width:100%; padding:.75rem 1rem; border:2px solid #333; border-radius:14px; background:#fffdfc; box-shadow:3px 3px 0 #f08f7f; font-size:1rem; }
.flashcard-edit-panel form textarea { min-height:120px; resize:vertical; }
.flashcard-edit-panel form input:focus, .flashcard-edit-panel form textarea:focus { outline:none; transform:translate(-3px,-3px); box-shadow:6px 6px 0 #f08f7f; }
.submit-btn { background:#f08f7f; color:#fff; font-weight:700; border:3px solid #333; border-radius:24px; padding:.7rem 1.4rem; box-shadow:4px 4px 0 #f08f7f; transition:transform .2s, box-shadow .2s, background .2s; }
.submit-btn:hover { background:#d94545; transform:translate(-4px,-4px); box-shadow:7px 7px 0 #f08f7f; }
.cancel-btn { background:#fff; color:#d94545; font-weight:700; border:3px solid #333; border-radius:24px; padding:.7rem 1.4rem; box-shadow:4px 4px 0 #f08f7f; transition:transform .2s, box-shadow .2s; text-decoration:none; }
.cancel-btn:hover { transform:translate(-4px,-4px); box-shadow:7px 7px 0 #f08f7f; }
.btn-row { display:flex; flex-wrap:wrap; gap:.75rem; margin-top:.5rem; }
</style>
{% endblock %}

{% block content %}
<div class="comic-dashboard">
    <h2 class="mb-4 comic-heading"><span>{% if form.instance.pk %}Edit FlashCard{% else %}Create FlashCard{% endif %}</span></h2>
    <div class="flashcard-edit-panel comic-panel">
        <form method="post">
            {% csrf_token %}
            <div class="mb-3">
                <label for="id_question">Question</label>
                <input type="text" name="question" id="id_question" value="{{ form.instance.question|default_if_none:'' }}">
            </div>
            <div class="mb-3">
                <label for="id_answer">Answer</label>
                <textarea name="answer" id="id_answer">{{ form.instance.answer|default_if_none:'' }}</textarea>
            </div>
            <div class="mb-2">
                <label>Multiple Choice Options (optional)</label>
                <div class="row g-2">
                    <div class="col-12 col-md-6">
                        <label for="id_option_a">Option A</label>
                        <input type="text" name="option_a" id="id_option_a" value="{{ form.instance.option_a|default_if_none:'' }}">
                    </div>
                    <div class="col-12 col-md-6">
                        <label for="id_option_b">Option B</label>
                        <input type="text" name="option_b" id="id_option_b" value="{{ form.instance.option_b|default_if_none:'' }}">
                    </div>
                    <div class="col-12 col-md-6">
                        <label for="id_option_c">Option C</label>
                        <input type="text" name="option_c" id="id_option_c" value="{{ form.instance.option_c|default_if_none:'' }}">
                    </div>
                    <div class="col-12 col-md-6">
                        <label for="id_option_d">Option D</label>
                        <input type="text" name="option_d" id="id_option_d" value="{{ form.instance.option_d|default_if_none:'' }}">
                    </div>
                </div>
            </div>
            <div class="mb-3">
                <label for="id_correct_option">Correct Option</label>
                <select name="correct_option" id="id_correct_option">
                    <option value="" {% if not form.instance.correct_option %}selected{% endif %}>-- None --</option>
                    <option value="A" {% if form.instance.correct_option == 'A' %}selected{% endif %}>A</option>
                    <option value="B" {% if form.instance.correct_option == 'B' %}selected{% endif %}>B</option>
                    <option value="C" {% if form.instance.correct_option == 'C' %}selected{% endif %}>C</option>
                    <option value="D" {% if form.instance.correct_option == 'D' %}selected{% endif %}>D</option>
                </select>
                <div class="form-text">Leave blank if not a multiple-choice card.</div>
            </div>
            <div class="mb-3">
                <label for="id_category_name">Category</label>
                <input type="text" name="category_name" id="id_category_name" value="{% if form.instance.category %}{{ form.instance.category.name }}{% endif %}" placeholder="Type category name">
            </div>
            <div class="btn-row">
                <button type="submit" class="submit-btn">{% if form.instance.pk %}Update{% else %}Create{% endif %}</button>
                <a href="{% url 'flashcard_list' %}" class="cancel-btn">Cancel</a>
            </div>
        </form>
    </div>
</div>
{% endblock %}
